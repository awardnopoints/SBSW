
{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Bus App</title>

   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
      <link rel="stylesheet" type="text/css" href="{% static 'dbus/index.css' %}">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      
    </head>


  <body>

    <!-- Static navbar -->
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="#">Bus App</a>
        </div>
          <ul class="nav navbar-nav navbar-right">
            <li class="active"><a href="./">get there on time<span class="sr-only">(current)</span></a></li>
          </ul>
        </div><!--/.nav-collapse -->
    </nav>

   <!--var bus_stops = [
        {% for item in contents %}
            {{item.stop_name}}
        {% endfor %}] -->
        
      
    <div class="container">

    <div class="jumbotron text-center col-md-6">
        <form class="form-horizontal">

  <div class="form-group">
    <label for="exampleFormControlSelect1">From</label>
    <select class="form-control" id="exampleFormControlSelect1">
        {% for item in contents %}
      <option> {{item.stop_name}}</option>
  {% endfor %}
    </select>
  </div>
        <div class="form-group">
    <label for="exampleFormControlSelect1">To</label>
    <select class="form-control" id="exampleFormControlSelect1">
         {% for item in contents %}
  <option> {{item.stop_name}}</option>
 {% endfor %}
    </select>
  </div>
            <div class='col-sm-6'>
            <div class="form-group">
    <div class='input-group date' id='datetimepicker1'>
                    <input type='text' class="form-control" />
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div></div>
            
  </div> 
            <!-- https://eonasdan.github.io/bootstrap-datetimepicker/ -->
              <div class="form-group"> 
    <div class="col-sm-offset-2 col-sm-10">
      <button type="go" class="btn btn-default" onclick="Go()">Go</button>
    </div>
  </div>
        </form>

        
        
      <!--     <div id='test'><p>The bus stops are: </p>
            <ul> {% for item in contents %}
                <li>{{item.stop_name}} </li>
                {% endfor %}
            </ul></div>  -->
        <div id="results"><p> </p></div>
        </div>
        
        
      <!-- Main component for a primary marketing message or call to action -->
      <div id='map' class="jumbotron text-center col-md-6">
        
        
	<script src="{% static 'dbus/markerclusterer.js' %}"></script>
        <!--<script src="{% static 'dbus/gmaps.js' %}" type='text/javascript'></script>-->
        <script src="{% static 'dbus/jquery-3.3.1.min.js' %}"></script>
	<!--<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADAq7_ArNs1g_fzNE-tLB0scnM5UtXXSM&callback=initMap" type = 'text/javascript'></script>-->
        <!--<script src="{% static 'dbus/index.js' %}" type='text/javascript'></script>-->
	<script type = "text/javascript">
	/*{% for item in contents %}
		var name = "{{item.stop_name}}"
		var latitude = "{{item.latitude}}"
		var longitude = "{{item.longitude}}"
		
		var marker = new google.maps.Marker({
			position: {lat: Number(latitude), lng: Number(longitude)},
			map: map,
			title: name
		});
	{% endfor %}
	*/
        
        
/*An array containing all the country names in the world:
var countries = [{% for item in contents %}
                 ""{{item.stop_name}}"
                {% endfor %}]; 
   */

      
$(function () {
                $('#datetimepicker1').datetimepicker();
            });
        
function Go(){
    document.getElementById('results').innerHTML= " "
    var start_stop;
    var end_stop;
    GetRoutes(start_stop, end_stop);
}
    // 1. takes name of start bus stop and end bus stop and translates to bus stop number. Finds routes that pass through each bus stop and selects only those common to both. 2. Determines how many stops between start and end //

    //next take time of day, day of week, weather and input into predictor?//
        
        
function GetRoutes(start, end) {
    
}
        
function initMap(){
var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: {lat: 53.3498, lng: -6.2603}
        });
markers = [];
 {% for item in contents %}
                var name = "{{item.stop_name}}"
                var latitude = "{{item.latitude}}"
                var longitude = "{{item.longitude}}"
                var marker = new google.maps.Marker({
                        position: {lat: Number(latitude), lng: Number(longitude)},
                        map: map,
                        title: name
                });
                markers.push(marker);
        {% endfor %}
        var markerCluster = new MarkerClusterer(map, markers,
            {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
}
	</script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADAq7_ArNs1g_fzNE-tLB0scnM5UtXXSM&callback=initMap" type = 'text/javascript'></script>
	<script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
    </script>   

      </div>
    </div> <!-- /container -->
    
  </body>
</html>
