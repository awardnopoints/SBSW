{% load static %}

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <title>
            Home
        </title>
        <link rel="stylesheet" type="text/css" href="{% static 'dbus/index.css' %}">
    </head>
    <body>
        <div id='menu'></div>
        <div id='map'></div>
	<script src="{% static 'dbus/markerclusterer.js' %}"></script>
        <!--<script src="{% static 'dbus/gmaps.js' %}" type='text/javascript'></script>-->
        <script src="{% static 'dbus/jquery-3.3.1.min.js' %}"></script>
	<!--<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADAq7_ArNs1g_fzNE-tLB0scnM5UtXXSM&callback=initMap" type = 'text/javascript'></script>-->
        <!--<script src="{% static 'dbus/index.js' %}" type='text/javascript'></script>-->
	<script type = "text/javascript">
	/*{% for item in contents %}
		var name = "{{item.stop_name}}"
		var latitude = "{{item.latitude}}"
		var longitude = "{{item.longitude}}"
		
		var marker = new google.maps.Marker({
			position: {lat: Number(latitude), lng: Number(longitude)},
			map: map,
			title: name
		});
	{% endfor %}
	*/

function initMap(){
var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 10,
          center: {lat: 53.3498, lng: -6.2603}
        });

markers = [];

 {% for item in contents %}
                var name = "{{item.stop_name}}"
                var latitude = "{{item.latitude}}"
                var longitude = "{{item.longitude}}"

                var marker = new google.maps.Marker({
                        position: {lat: Number(latitude), lng: Number(longitude)},
                        map: map,
                        title: name
                });
                markers.push(marker);
        {% endfor %}


        var markerCluster = new MarkerClusterer(map, markers,
            {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
}
	</script>
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADAq7_ArNs1g_fzNE-tLB0scnM5UtXXSM&callback=initMap" type = 'text/javascript'></script>
	<script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
    </script>   
 </body>
</html>
